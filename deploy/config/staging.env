# =============================================================================
# FirstLight - Staging Environment Configuration
# =============================================================================
# Staging environment settings - more restrictive than development,
# but not as locked down as production. Used for testing before release.

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=firstlight
APP_ENV=staging
APP_VERSION=0.1.0
LOG_LEVEL=DEBUG
LOG_FORMAT=json
DEBUG=true

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
API_TIMEOUT_SECONDS=300
API_MAX_REQUEST_SIZE_MB=100
API_CORS_ORIGINS=*
API_RATE_LIMIT_PER_MINUTE=100

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://staging_user:${STAGING_DB_PASSWORD}@postgres:5432/firstlight_staging
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_ECHO=true

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
CACHE_BACKEND=redis
CACHE_URL=redis://redis:6379/0
CACHE_TTL_SECONDS=1800
CACHE_MAX_SIZE_MB=512
CACHE_KEY_PREFIX=flight_staging:

# -----------------------------------------------------------------------------
# Processing Configuration
# -----------------------------------------------------------------------------
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT_SECONDS=1800
TILE_SIZE=512
DEFAULT_PROFILE=laptop
MAX_MEMORY_GB=4

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
STORAGE_BACKEND=local
STORAGE_LOCAL_PATH=/data/firstlight
STORAGE_S3_BUCKET=
STORAGE_S3_REGION=us-east-1
STORAGE_S3_ENDPOINT=

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_DISTRIBUTED=false
ENABLE_GPU=false
ENABLE_ASYNC_PROCESSING=true
ENABLE_QUALITY_CHECKS=true
ENABLE_PROVENANCE_TRACKING=true
ENABLE_WEBHOOKS=true

# -----------------------------------------------------------------------------
# External Services
# -----------------------------------------------------------------------------
# STAC API endpoints (comma-separated)
STAC_ENDPOINTS=https://earth-search.aws.element84.com/v1

# Planetary Computer (optional)
PLANETARY_COMPUTER_API_KEY=

# Weather data sources
ERA5_API_KEY=
GFS_ENDPOINT=https://nomads.ncep.noaa.gov

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# JWT settings - use staging-specific secret
JWT_SECRET_KEY=${STAGING_API_SECRET:-staging-secret-change-me}
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API key for service-to-service communication
API_KEY=

# -----------------------------------------------------------------------------
# Monitoring & Telemetry
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=true
TRACING_ENDPOINT=
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
AGENT_HEARTBEAT_SECONDS=30
AGENT_MAX_RETRIES=3
AGENT_RETRY_DELAY_SECONDS=5
