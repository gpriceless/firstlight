# =============================================================================
# Multiverse Dive - Production Configuration
# =============================================================================
# Production environment overrides. These settings are optimized for
# high-availability, security, and performance in production deployments.
#
# IMPORTANT: Sensitive values (secrets, API keys) should be injected via
# secrets management (Vault, AWS Secrets Manager, K8s Secrets) rather than
# stored in this file.

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_ENV=production
LOG_LEVEL=WARNING
LOG_FORMAT=json
DEBUG=false

# -----------------------------------------------------------------------------
# API Server Configuration (Production-scale)
# -----------------------------------------------------------------------------
API_WORKERS=8
API_TIMEOUT_SECONDS=600
API_MAX_REQUEST_SIZE_MB=500
API_CORS_ORIGINS=https://app.multiverse-dive.io,https://admin.multiverse-dive.io
API_RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# Database Configuration (Production)
# -----------------------------------------------------------------------------
# Use environment variable injection for DATABASE_URL
# DATABASE_URL=postgresql://user:password@prod-db.cluster.region.rds.amazonaws.com:5432/multiverse_dive
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_TIMEOUT=60
DATABASE_ECHO=false

# -----------------------------------------------------------------------------
# Cache Configuration (Production Redis Cluster)
# -----------------------------------------------------------------------------
CACHE_BACKEND=redis
# Use environment variable injection for CACHE_URL
# CACHE_URL=redis://prod-redis.cluster.region.cache.amazonaws.com:6379/0
CACHE_TTL_SECONDS=7200
CACHE_MAX_SIZE_MB=4096

# -----------------------------------------------------------------------------
# Processing Configuration (Production-scale)
# -----------------------------------------------------------------------------
MAX_CONCURRENT_JOBS=50
JOB_TIMEOUT_SECONDS=7200
TILE_SIZE=1024
DEFAULT_PROFILE=cloud
MAX_MEMORY_GB=32

# -----------------------------------------------------------------------------
# Storage Configuration (S3)
# -----------------------------------------------------------------------------
STORAGE_BACKEND=s3
STORAGE_S3_BUCKET=multiverse-dive-production
STORAGE_S3_REGION=us-east-1
# Use VPC endpoint for S3 in production
STORAGE_S3_ENDPOINT=

# -----------------------------------------------------------------------------
# Feature Flags (Production)
# -----------------------------------------------------------------------------
ENABLE_DISTRIBUTED=true
ENABLE_GPU=true
ENABLE_ASYNC_PROCESSING=true
ENABLE_QUALITY_CHECKS=true
ENABLE_PROVENANCE_TRACKING=true
ENABLE_WEBHOOKS=true

# -----------------------------------------------------------------------------
# Security Configuration (Production)
# -----------------------------------------------------------------------------
# CRITICAL: Inject these via secrets management
# JWT_SECRET_KEY=<inject-from-vault>
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8

# -----------------------------------------------------------------------------
# Monitoring & Telemetry (Production)
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=true
# TRACING_ENDPOINT=https://otel-collector.monitoring.svc:4317
# SENTRY_DSN=<inject-from-vault>

# -----------------------------------------------------------------------------
# Agent Configuration (Production)
# -----------------------------------------------------------------------------
AGENT_HEARTBEAT_SECONDS=15
AGENT_MAX_RETRIES=5
AGENT_RETRY_DELAY_SECONDS=10
